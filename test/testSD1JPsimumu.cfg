process GEN  = {

      untracked PSet maxEvents = {untracked int32 input = 1000}


      service = RandomNumberGeneratorService
      {
            untracked uint32 sourceSeed = 2543186
      }

      service = TimerService {
             untracked bool useCPUtime = true // set to false for wall-clock-time
      }

	untracked PSet options = {
	      include "FWCore/Framework/test/cmsExceptionsFatalOption.cff"
	      untracked bool wantSummary = true
//	      untracked bool makeTriggerResults = true
	   }


      # Pomwig DataCard
      source = PomwigSource
      {
                  #untracked double fracErrors = 0.2
                  untracked int32 herwigVerbosity =  1
                  untracked bool herwigHepMCVerbosity = false
                  untracked int32 herwigLhapdfVerbosity = 0
                  untracked int32 maxEventsToPrint = 2
                  untracked bool printCards = true
                  untracked string lhapdfSetPath = "/local/exposg/osg-app/cmssoft/cms/slc3_ia32_gcc323/external/lhapdf/5.2.3-cms/PDFsets"

                  int32 diffTopology = 1
                  int32 h1fit = 2

		  untracked bool enableForcedDecays = true 
		  PSet  ForcedDecaysParameters = {
		    untracked vint32 Idktmp = {521,521}
		    untracked vdouble Brtmp = {1,0.33333}
		    untracked vint32 Imetmp = {0,0}
		    untracked vint32 Iatmp = {443,443}
		    untracked vint32 Ibtmp = {321,323}
		    untracked vint32 Ictmp = {0,0}
		    untracked vint32 Idtmp = {0,0}
		    untracked vint32 Ietmp = {0,0}
		  }

                  PSet HerwigParameters = {
                       vstring parameterSets = {
                          "SD1Inclusive"
                       }

                       vstring SD1Inclusive = {
                             'NSTRU      = 14         ! H1 Pomeron Fit B',
                             'Q2WWMN     = 1E-6       ! Minimum |t|',
                             'Q2WWMX     = 4d0        ! Maximum |t|',
                             'YWWMIN     = 1E-6       ! Minimum xi',
                             'YWWMAX     = 0.1d0      ! Maximum xi',
                             'PTMIN      = 30d0       ! 2->2 Minimum PT',
                             'IPROC      = 11705       ! Process PomP -> bb -> mumu',
                             'MODPDF(1)  = -1         ! Set MODPDF',
                             'MODPDF(2)  = 10050      ! Set MODPDF CTEQ6M'
                       }

                  }
      }

      module filter = PomwigFilter {}

      module  jpsifilter  = MCSingleParticleFilter {
           untracked vint32 ParticleID = {443}
           //untracked vint32 Status = {2}
           untracked vdouble MinPt = {0.}
           untracked vdouble MinEta = {-5}
           untracked vdouble MaxEta = {5}
     }

      module mumufilter = MCParticlePairFilter {
         untracked vint32 ParticleID1 = {13}
         untracked vint32 ParticleID2 = {13}
         //untracked int32 ParticleCharge = 0
         untracked vint32 Status = {1,1}
         untracked vdouble MinPt = {2.5,2.5}
         untracked vdouble MinEta = {-5,-5}
         untracked vdouble MaxEta = {5,5}
      }

      #path p1 = {filter} # pomwigfilter
      path p1 = {filter,jpsifilter,mumufilter} # pomwigfilter
      
      # Event output
      include "Configuration/EventContent/data/EventContent.cff"

      # output module
      module GEN = PoolOutputModule
      {
            untracked string fileName = "bb_jpsi_mumu_SD_GEN.root"
            untracked PSet SelectEvents = {
              vstring SelectEvents = {"p1"}
            }
      }

      endpath outpath = { GEN }
      schedule = { p1, outpath }


}
